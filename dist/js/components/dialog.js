/**
 * Dialog plugin.
 *
 * @package Fundament
 */
!function(i,n,t){"use strict";function o(n,t){this.config=i.extend({},i.fn[e].defaults,t),this.elem=n,this.$elem=i(n),this.$wrap=i("<div/>",{class:a.wrap,role:"document"}),this.$dimmer=i("<div/>",{class:a.dimmer}),this.busy=!1,this.init()}var e="dialog",s={openFrom:null,closable:!0,autoFocus:!0,transition:"scale",onOpen:function(){},onOpening:function(){},onClose:function(){},onClosing:function(){}},a={dimmer:"page-dimmer",wrap:"dialog-wrap",active:"is-active"},r={dimmer:".page-dimmer",block:".dialog__block",close:".dialog__close"},c=i(n),l=i(t),d=i(t.body),f=Fm.transitionEnd();i.extend(o.prototype,{init:function(){this.setup(),this.bind()},setup:function(){var n=this.config;0===i(r.dimmer).length&&d.append(this.$dimmer),this.$dimmer=i(r.dimmer),this.$wrap=this.$elem.wrap(this.$wrap).parent().hide(),n.openFrom&&(n.openFrom=i(n.openFrom))},bind:function(){var i=this,n=i.config;i.$elem.on("click",r.close,i.close.bind(i)).find(r.block).on(f,function(i){i.stopPropagation()}),n.closable&&i.$wrap.on("click",function(n){n.target===this&&i.close()})},toggle:function(){this.$elem.is(":visible")?this.close():this.open()},open:function(){var i=this;i.busy||(i.config.onOpening.call(i.elem),i.busy=!0,i.scrollBar(!1),i.$dimmer.show(),i.$wrap.show(),i.$dimmer.addClass(a.active),i.transition("In",function(){i.focus(),i.config.onOpen.call(i.elem),i.busy=!1}))},close:function(){var i=this;i.busy||(i.config.onClosing.call(i.elem),i.busy=!0,i.transition("Out",function(){i.$wrap.hide(),i.$dimmer.removeClass(a.active).one(f,function(){i.scrollBar(!0),i.$dimmer.hide(),i.config.onClose.call(i.elem),i.busy=!1})}))},transition:function(n,t){var o=this.config.transition+n,e={duration:1.5*i.fn.transition.defaults.duration,onEnd:t};this.config.openFrom&&(o="dialog"+n,e.curve="cubic-bezier(0.4,0.7,0.6,1)",e.animations=this.getAnimation()),this.$elem.transition(o,e)},scrollBar:function(n){if(!(c.height()>=l.height()))if(n)d.css({overflow:"","padding-right":""});else{var t=i("<div/>").css({width:100,overflow:"scroll",visibility:"hidden"}).appendTo(d),o=i("<div/>").css({width:"100%"}).appendTo(t);d.css({overflow:"hidden","padding-right":100-o.outerWidth()}),t.remove()}},focus:function(){this.config.autoFocus&&this.$elem.find("input, textarea, select").first().focus()},setting:function(n){i.extend(this.config,n)},getAnimation:function(){var i=n.pageYOffset,t=this.config.openFrom,o=t.offset(),e={x:o.left-c.width()/2+t.width()/2,y:o.top-i-c.height()/2+t.height()/2};return{dialog:{start:{opacity:0,transform:"translate("+e.x+"px, "+e.y+"px) scale(0.05)","transform-origin":"center"},end:{opacity:1,transform:"translate(0,0) scale(1)"}}}}}),i.fn[e]=function(n,t){return this.each(function(){var s=i.data(this,e);s?"string"==typeof n&&s[n]&&s[n].apply(s,Array.isArray(t)?t:[t]):i.data(this,e,new o(this,n))})},i.fn[e].defaults=s}(jQuery,window,document);
//# sourceMappingURL=dialog.js.map
