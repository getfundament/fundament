{"version":3,"sources":["transition.js"],"names":["$","Transition","element","animation","settings","onEnd","self","this","config","extend","fn","Name","defaults","elem","$elem","parseInt","duration","queue","init","Defaults","delay","curve","onStart","transitionEnd","Fm","prototype","parse","end","animations","hasOwnProperty","console","warn","off","one","e","stopPropagation","setTimeout","bind","fire","requestAnimationFrame","start","slice","direction","is","call","css","style","show","toggleDisplay","opacity","transform","transform-origin","transition","dequeue","hide","hasAttribute","attr","state","prop","prefixed","prefixProp","each","fade","fadeUp","fadeDown","scale","scaleUp","scaleDown","slideUp","slideDown","flipX","flipY","jQuery"],"mappings":"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","file":"transition.js","sourcesContent":["/**\r\n * Transition plugin.\r\n *\r\n * @package Fundament\r\n */\r\n;(function($) {\r\n    'use strict';\r\n\r\n    var Name = 'transition';\r\n\r\n    var Defaults = {\r\n        duration : 280,\r\n        delay    : 0,\r\n        curve    : 'ease',\r\n        queue    : true,\r\n        onStart  : function() {},\r\n        onEnd    : function() {}\r\n    };\r\n\r\n    // Globals\r\n\r\n    var transitionEnd = Fm.transitionEnd();\r\n\r\n    // Constructor\r\n\r\n    function Transition(element, animation, settings, onEnd) {\r\n        var self = this;\r\n\r\n        self.config = $.extend({}, $.fn[Name].defaults, settings);\r\n        self.elem   = element;\r\n        self.$elem  = $(element);\r\n\r\n        if (typeof onEnd === 'function')\r\n            self.config.onEnd = onEnd; // onEnd shorthand\r\n        if (settings == parseInt(settings))\r\n            self.config.duration = settings; // duration shorthand\r\n        else if (typeof settings === 'function')\r\n            self.config.onEnd = settings; // onEnd shorthand\r\n\r\n        (self.config.queue) ?\r\n            self.$elem.queue(function() {\r\n                self.init(animation);\r\n            }): self.init(animation);\r\n    }\r\n\r\n    // Prototype\r\n\r\n    $.extend(Transition.prototype, {\r\n\r\n        init: function(animation) {\r\n            var self   = this,\r\n                config = self.config;\r\n\r\n            self.animation = self.parse(animation);\r\n\r\n            if (self.animation === 'display') {\r\n                return self.end();\r\n            } else if ( ! config.animations.hasOwnProperty(self.animation)) {\r\n                return console.warn('Trying to call an undefined animation');\r\n            }\r\n\r\n            if (transitionEnd) {\r\n                self.$elem\r\n                    .off(transitionEnd) // prevent any interruptions\r\n                    .one(transitionEnd, function(e) {\r\n                        e.stopPropagation(); // prevent event bubbling\r\n                        self.end();\r\n                    });\r\n            } else {\r\n                // Set a timer which functions as a fallback for the\r\n                // unsupported transitionEnd event.\r\n                setTimeout(self.end.bind(self), config.duration + config.delay);\r\n            }\r\n\r\n\r\n            // Create a separate queue entry to make sure previous\r\n            // re-draw events are finished. This also notifies the\r\n            // browser that the element is soon going to be animated.\r\n            var fire = function() {\r\n                requestAnimationFrame(self.start.bind(self));\r\n            };\r\n\r\n            config.delay ? fire() : setTimeout(fire, config.delay);\r\n        },\r\n\r\n        /**\r\n         * Parses the animation and determines the transition direction.\r\n         * Returns the base name of the animation.\r\n         *\r\n         * @param {string} animation\r\n         * @return {string}\r\n         */\r\n        parse: function(animation) {\r\n            if (animation.slice(-2) === 'In') {\r\n                this.direction = 'inward';\r\n                animation = animation.slice(0, -2);\r\n            } else if (animation.slice(-3) === 'Out') {\r\n                this.direction = 'outward';\r\n                animation = animation.slice(0, -3);\r\n            } else {\r\n                this.direction = this.$elem.is(':visible') ? // toggle\r\n                    'outward':\r\n                    'inward' ;\r\n            }\r\n\r\n            return animation;\r\n        },\r\n\r\n        /**\r\n         * Start the transition.\r\n         */\r\n        start: function() {\r\n            var self = this;\r\n\r\n            self.config.onStart.call(self.elem);\r\n\r\n            self.$elem\r\n                .css(self.style('start')) // apply start CSS\r\n                .show(); // ensure visibility\r\n\r\n            requestAnimationFrame(function() {\r\n                self.$elem.css(self.style('end')); // apply end CSS\r\n            });\r\n        },\r\n\r\n        /**\r\n         * End the transition.\r\n         */\r\n        end: function() {\r\n            var self  = this;\r\n\r\n            self.toggleDisplay();\r\n\r\n            self.config.onEnd.call(self.elem);\r\n\r\n            self.$elem.css({\r\n                'opacity'          : '',\r\n                'transform'        : '',\r\n                'transform-origin' : '',\r\n                'transition'       : ''\r\n            });\r\n\r\n            if (self.config.queue)\r\n                requestAnimationFrame(function() {\r\n                    self.$elem.dequeue();\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Toggle the display.\r\n         */\r\n        toggleDisplay: function() {\r\n            this.direction === 'inward' ?\r\n                this.$elem.show():\r\n                this.$elem.hide();\r\n\r\n            if (this.elem.hasAttribute('aria-hidden')) {\r\n                this.$elem.attr('aria-hidden', this.direction !== 'inward');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get the inline style for the transition.\r\n         *\r\n         * @param {string} state\r\n         */\r\n        style: function(state) {\r\n            var self = this,\r\n                animation = self.config.animations[self.animation],\r\n                direction = self.direction,\r\n                css;\r\n\r\n            if (state === 'start') {\r\n                css = (direction === 'inward') ?\r\n                    animation.start:\r\n                    animation.end; // reversed\r\n\r\n                css.transition = null;\r\n            } else {\r\n                css = (direction === 'inward') ?\r\n                    animation.end:\r\n                    animation.start; // reversed\r\n\r\n                css.transition = 'all ' +\r\n                    self.config.duration + 'ms ' +\r\n                    self.config.curve;\r\n            }\r\n\r\n            for (var prop in css) {\r\n                var prefixed = Fm.prefixProp(prop); // prefix attributes\r\n                if (prefixed !== prop)\r\n                    css[prefixed] = css[prop];\r\n            }\r\n\r\n            return css;\r\n        }\r\n    });\r\n\r\n    // Plugin\r\n\r\n    $.fn[Name] = function(animation, settings, onEnd) {\r\n        return this.each(function() {\r\n            new Transition(this, animation, settings, onEnd);\r\n        });\r\n    };\r\n\r\n    $.fn[Name].defaults = Defaults;\r\n    $.fn[Name].defaults.animations = {\r\n        fade: {\r\n            start : { 'opacity': 0 },\r\n            end   : { 'opacity': 1 }\r\n        },\r\n        fadeUp: {\r\n            start : { 'opacity': 0, 'transform': 'translateY(10%)' },\r\n            end   : { 'opacity': 1, 'transform': 'translateY(0)' }\r\n        },\r\n        fadeDown: {\r\n            start : { 'opacity': 0, 'transform': 'translateY(-10%)' },\r\n            end   : { 'opacity': 1, 'transform': 'translateY(0)' }\r\n        },\r\n        scale: {\r\n            start : { 'opacity': 0, 'transform': 'scale(0.6)' },\r\n            end   : { 'opacity': 1, 'transform': 'scale(1.0)' }\r\n        },\r\n        scaleUp: {\r\n            start : { 'opacity': 0, 'transform': 'scale(0.6)', 'transform-origin': 'bottom' },\r\n            end   : { 'opacity': 1, 'transform': 'scale(1.0)', 'transform-origin': 'bottom' }\r\n        },\r\n        scaleDown: {\r\n            start : { 'opacity': 0, 'transform': 'scale(0.6)', 'transform-origin': 'top' },\r\n            end   : { 'opacity': 1, 'transform': 'scale(1.0)', 'transform-origin': 'top' }\r\n        },\r\n        slideUp: {\r\n            start : { 'opacity': 0.2, 'transform': 'scaleY(0.01)', 'transform-origin': 'bottom'},\r\n            end   : { 'opacity': 1, 'transform': 'scaleY(1)', 'transform-origin': 'bottom'}\r\n        },\r\n        slideDown: {\r\n            start : { 'opacity': 0.2, 'transform': 'scaleY(0.01)', 'transform-origin': 'top'},\r\n            end   : { 'opacity': 1, 'transform': 'scaleY(1)', 'transform-origin': 'top'}\r\n        },\r\n        flipX: {\r\n            start : { 'opacity': 0, 'transform': 'perspective(2000px) rotateY(-90deg)' },\r\n            end   : { 'opacity': 1, 'transform': 'perspective(2000px) rotateY(0deg)' }\r\n        },\r\n        flipY: {\r\n            start : { 'opacity': 0, 'transform': 'perspective(2000px) rotateX(-90deg)' },\r\n            end   : { 'opacity': 1, 'transform': 'perspective(2000px) rotateX(0deg)' }\r\n        }\r\n    };\r\n\r\n})(jQuery);\r\n"]}