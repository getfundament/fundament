/**
 * Popup plugin.
 *
 * @package Fundament
 */
!function(e,t,i){"use strict";function o(t,i){this.namespace="."+n+"."+Fm.createID(),this.config=e.extend({},e.fn[n].defaults,i),this.elem=t,this.$elem=e(t),this.$popup=this.$elem.next(s.popup),this.calc=null,this.timer=null,this.active=!1,this.init()}var n="popup",p={trigger:"hover",transition:"display",direction:"southwest",delay:100,distance:10,hoverable:!1,onShow:function(){},onHide:function(){}},l={popup:"popup"},s={popup:".popup"},h=e(t),a=e(i.body);e.extend(o.prototype,{init:function(){var e=this;e.$popup.length?e.$popup.detach().appendTo(a):e.create(),e.bind()},create:function(){var t=e("<div/>",{class:l.popup,html:e("<div/>").html(this.$elem.attr("title")).text()});t.appendTo(a),this.$elem.attr("title",null),this.$popup=t},bind:function(){var e=this,t=e.namespace;switch(e.config.trigger){case"click":e.$elem.on("click"+t,e.toggle.bind(e));break;case"hover":e.$elem.add(e.config.hoverable?e.$popup:null).on("mouseenter"+t,e.show.bind(e)).on("mouseleave"+t,e.hide.bind(e));break;case"focus":e.$elem.on("focusin"+t,e.show.bind(e)).on("focusout"+t,e.hide.bind(e))}h.on("resize"+t,Fm.debounce(e.hide.bind(e),200,!0))},unbind:function(){var e=this,t=e.namespace;switch(e.config.trigger){case"click":e.$elem.off("click"+t);break;case"hover":e.$elem.add(e.config.hoverable?e.$popup:null).off("mouseenter"+t).off("mouseleave"+t);break;case"focus":e.$elem.off("focusin"+t).off("focusout"+t)}h.off("resize"+t)},calculate:function(){var e=this.$elem.offset();return(!this.calc||this.calc.elem.top!==e.top||this.calc.elem.left!==e.left)&&(this.calc={elem:{width:this.$elem.outerWidth(),height:this.$elem.outerHeight(),top:e.top,left:e.left},popup:{width:this.$popup.outerWidth(),height:this.$popup.outerHeight()}},!0)},position:function(){if(this.calculate()){var e=this,t=e.calc,i=e.$elem.data("direction")||e.config.direction,o=e.config.distance,n={};switch(i){case"north":n={top:t.elem.top-t.popup.height-o,left:t.elem.left+t.elem.width/2-t.popup.width/2};break;case"northeast":n={top:t.elem.top-t.popup.height-o,left:t.elem.left+t.elem.width-t.popup.width};break;case"east":n={top:t.elem.top+t.elem.height/2-t.popup.height/2,left:t.elem.left+t.elem.width+o};break;case"southeast":n={top:t.elem.top+t.elem.height+o,left:t.elem.left+t.elem.width-t.popup.width};break;case"south":n={top:t.elem.top+t.elem.height+o,left:t.elem.left+t.elem.width/2-t.popup.width/2};break;case"southwest":n={top:t.elem.top+t.elem.height+o,left:t.elem.left};break;case"west":n={top:t.elem.top+t.elem.height/2-t.popup.height/2,left:t.elem.left-t.popup.width-o};break;case"northwest":n={top:t.elem.top-t.popup.height-o,left:t.elem.left}}e.$popup.css(n).addClass(l.popup+"--"+i)}},toggle:function(){this.active?this.hide():this.show()},show:function(){var e=this,t=e.config;clearTimeout(e.timer),e.active||(e.position(),e.timer=setTimeout(function(){e.active=!0,e.$popup.transition(t.transition+"In",{queue:!1,onEnd:t.onShow.bind(e.elem)})},t.delay.show||t.delay))},hide:function(){var e=this,t=e.config;clearTimeout(e.timer),e.active&&(e.timer=setTimeout(function(){e.active=!1,e.$popup.transition(t.transition+"Out",{queue:!1,onEnd:t.onHide.bind(e.elem)})},t.delay.hide||t.delay))},setting:function(t){e.extend(this.config,t)},destroy:function(){this.unbind(),this.$popup.remove(),e.data(this.elem,n,null)}}),e.fn[n]=function(t,i){return this.each(function(){var p=e.data(this,n);p?"string"==typeof t&&p[t]&&p[t].apply(p,Array.isArray(i)?i:[i]):e.data(this,n,new o(this,t))})},e.fn[n].defaults=p}(jQuery,window,document);
//# sourceMappingURL=popup.js.map
